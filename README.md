Certainly! Below is a detailed and comprehensive README file draft for your project, based on the tutorial and the text content you provided. This README includes a simple description of the project, its architecture, and references to the demonstration images you have in the repository.

---

# Event Sourcing & CQRS Bank Account Management Demo

This project is a practical demonstration of implementing **Event Sourcing** and **CQRS (Command Query Responsibility Segregation)** patterns using **Axon Framework**, **Spring Boot**, and **Spring Cloud**. It simulates a simple banking system for managing accounts, illustrating how commands and queries are handled separately with event-driven architecture.

---

## Project Description

The application manages bank accounts, allowing operations such as:

- Creating new accounts with an initial balance and currency
- Activating accounts
- Crediting and debiting accounts with validation rules (e.g., account must be activated, sufficient balance for debit)
- Changing account status (e.g., suspended, activated, blocked)
- Querying account details and transaction history
- Real-time updates pushed to the frontend via Server-Sent Events (SSE)

The backend is built as a microservice following the CQRS pattern, splitting the write (command) and read (query) models for scalability and maintainability.

---

## Architecture Overview

The architecture is based on two main parts:

### 1. Command Side (Write Model)

- **Handles business operations** like creating accounts, crediting, debiting, and updating account status.
- Uses **Axon Framework Aggregates** to encapsulate domain logic and enforce business rules.
- Commands are dispatched asynchronously using `CommandGateway`.
- Events generated by commands are stored in an **Event Store** (either an in-memory store or Axon Server).
- Event sourcing handlers update the aggregate state based on events.
- Validation rules (e.g., balance checks, account status) are enforced here.

### 2. Query Side (Read Model)

- Uses a relational database (PostgreSQL or H2 during development) to maintain a **projection** of the current state.
- Event handlers subscribe to events from the event store and update the read database.
- Provides REST endpoints for querying account details and transaction history.
- Supports real-time updates to the frontend using reactive streams and Server-Sent Events.
- Queries are dispatched and handled asynchronously using `QueryGateway` and query handlers.

---

## Project Structure (Structure du Projet)

```
src/main/java/com/example/demo/
│
├── command/
│   ├── aggregates/                  # Aggregate root and command handlers
│   ├── commands/                    # Command DTOs (e.g., AddAccountCommand, CreditAccountCommand)
│   ├── controllers/                 # REST controllers for command endpoints
│   ├── dto/                        # Command request DTOs
│   ├── events/                     # Event classes (e.g., AccountCreatedEvent)
│
├── query/
│   ├── controllers/                 # REST controllers for query endpoints
│   ├── dto/                        # Query response DTOs (e.g., AccountStatementResponseDTO)
│   ├── entities/                   # JPA entities for read model (Account, AccountOperation)
│   ├── handlers/                   # Event handlers for projecting events to read DB
│   ├── queries/                    # Query classes (e.g., GetAllAccountsQuery)
│   ├── repository/                 # Spring Data JPA repositories
│
├── config/                        # Application configuration, including Axon and Spring settings
│
├── Application.java               # Main Spring Boot application class
```

---

## Technology Stack

- **Java 21**
- **Spring Boot 3**
- **Axon Framework 4.x** for CQRS and Event Sourcing
- **PostgreSQL** (or H2 for quick tests) for read and event store databases
- **Spring Data JPA** for ORM mapping
- **Spring WebFlux** for reactive streams (SSE)
- **Docker & Docker Compose** for containerized PostgreSQL, PgAdmin, and Axon Server
- **Swagger (Springdoc OpenAPI)** for API documentation and testing

---

## How to Run

1. Clone the repository.
2. Use Docker Compose to start PostgreSQL, PgAdmin, and Axon Server:
   ```bash
   docker-compose up -d
   ```
3. Configure your application to connect to the PostgreSQL and Axon Server instances.
4. Run the Spring Boot application:
   ```bash
   ./mvnw spring-boot:run
   ```
5. Access the Swagger UI at `http://localhost:8066/swagger-ui.html` to test commands and queries.

---

## Demonstration Images

Below are key images illustrating the architecture and system behavior included in the repository:

| Image              | Description                                                  | Last Commit Message | Last Commit Date |
|--------------------|--------------------------------------------------------------|---------------------|------------------|
| `img_apis.png`      | API endpoints overview - command and query REST APIs         | first commit        | 12 minutes ago   |
| `img_arch_g.png`    | High-level architecture diagram including command and query | first commit        | 12 minutes ago   |
| `img_axon.png`      | Axon Framework components and interaction                    | first commit        | 12 minutes ago   |
| `img_axon_overview.png` | Detailed Axon event flow and event sourcing overview       | first commit        | 12 minutes ago   |
| `img_command.png`    | Command handling flow including command dispatch and aggregate | first commit       | 12 minutes ago   |
| `img_commons.png`    | Common classes shared between command and query sides        | first commit        | 12 minutes ago   |
| `img_pgadmin.png`    | PgAdmin interface showing PostgreSQL database and tables     | first commit        | 12 minutes ago   |
| `img_query.png`      | Query side flow with event handlers and read model projection | first commit       | 12 minutes ago   |

Please refer to these images to better understand the system’s structure and workflow.

---

## Summary

This project is a comprehensive tutorial on how to implement **Event Sourcing** and **CQRS** patterns in a Java microservice environment using Axon Framework and Spring Boot. It covers:

- Command model with aggregate roots and events.
- Event store persistence and projection to a separate read database.
- Query model with optimized read entities and REST endpoints.
- Real-time updates with reactive streams and Server-Sent Events.
- Integration with Axon Server for distributed event handling.

The code and architecture demonstrated here provide a solid foundation for building scalable, event-driven microservices.

---

## References

- Axon Framework Documentation: https://docs.axoniq.io/
- Spring Boot Reference: https://spring.io/projects/spring-boot
- PostgreSQL Official Site: https://www.postgresql.org/
- Docker Compose: https://docs.docker.com/compose/

---

### Ramadan Mubarak and Happy Coding!  
Feel free to explore the codebase, experiment with the commands and queries, and extend the system as needed.

---

If you want, I can also help you draft a short description for your GitHub repository homepage or help you with formatting the README.md file in markdown. Let me know!
